---
title: JDBC(작성중)
date: 2024-01-05 20:00:22 +09:00
categories:
  - 언어
  - Java
tags:
  - Java
  - JDBC
---

## 공부하게 된 배경
전부터 ORM에 대해서 공부하며 JDBC에 대해서 정확히 정리해야겠다고 생각했는데, HikariCP를 포스팅하면서 이참에 이어서 JDBC를 포스팅하는 것이 좋겠다고 생각해 포스팅하게 되었다.

> [HikariCP(Connection Pool) 포스팅 보러가기](https://byeongbumseo.github.io/posts/HikariCP/)

Spring Data JDBC, Spring Data JPA 등과 같은 기술이 등장하면서 JDBC API를 직접적으로 사용하는 일은 줄어들었지만, 이러한 기술들도 데이터베이스와 연동하기 위해서 내부적으로 JDBC를 이용하기 때문에 JDBC의 동작 흐름에 대해 알아둘 필요가 있다.


## 다루는 내용
이 글에서는 JDBC 를 설명하며 연관 지식으로
- DB Connection
- JDBC 드라이버
- JDK

에 대해서도 다룬다.  

## JDBC(Java DataBase Connectivity) 란?
---
Java에서 DB에 접속할 수 있도록 하는 Java API이다. JDBC는 데이터베이스에서 자료를 쿼리하거나 업데이트하는 방법을 제공한다.

> Java API : 자바를 사용하여 쉽게 구현할 수 있도록 한 클래스 라이브러리의 집합. 즉, 복잡하지만 필요한 클래스들을 **미리 구현하여 사용자가 쉽게 구현하도록 하는 API**

- JDBC는 DBMS에 종속되지 않는 관련 API를 제공한다.
- JDBC API는 JDK[^1]에서 제공하며 JDBC 프로그래밍을 위해서는 JDBC 드라이버가 필요하다. JDBC 드라이버는 각 DBMS 회사에서 제공하는 라이브러리 압축파일(jar)을 말한다.

![JDBC 드라이버에 관한 설명](/assets/img/posts/2024-01-05-22-53-17.png)
> 출처 : https://devlog-wjdrbs96.tistory.com/139
- JDBC는 Java 애플리케이션 내에서 JDBC API를 사용하여 데이터베이스에 접근하는 단순한 구조이다. JDBC API를 사용하기 위해서는 JDBC 드라이버를 먼저 로딩한 후 데이터베이스와 연결하게 된다.

- JDBC는 3가지 기능을 표준 인터페이스로 정의하여 제공한다.
  - java.sql.Connection - 연결
  - java.sql.Statement - SQL을 담은 내용
  - java.sql.ResultSet - SQL 요청 응답

![JDBC 표준 인터페이스](/assets/img/posts/2024-01-11-00-42-56.png)


[^1]: JDK는 개발자가 자바 기반 애플리케이션 개발을 위해 다운로드하는 소프트웨어 패키지다. 컴파일러와 클래스 라이브러리(Class Library)가 포함되어 있다.


### JDBC 드라이버

데이터베이스와의 통신을 담당하는 인터페이스
Oracle, MS SQL, MySQL 등과 같은 데이터베이스에 알맞은 JDBC 드라이버를 구현하여 제공
JDBC 드라이버의 구현체를 이용해서 특정 벤더의 데이터베이스에 접근할 수 있음


### 주요 클래스 및 인터페이스
- DriverManger : JDBC 드라이버 로드
- Connectoin : DB와 연결하기 위한 인터페이스
- Statement : SQl을 보내기 위한 통로. 인자가 없음.  
- PreparedStatement : Statement와 동일한데 차이점은 인자값으로 SQL을 받기 때문에 특정한 SQL에 대한 통로라고 생각하면 된다. 
- CallableStatement : PL/SQL을 호출할 때 사용
- ResultSet : SQL문의 결과를 저장하는 객체


### DB Connection
- DB를 사용하기 위해 DB와 애플리케이션 간 통신을 할 수 있는 수단
- DB Connection은 Database Driver와 Database 연결 정보를 담은 URL이 필요함
- Java의 DB Connection은 JDBC를 주로 이용하는데, URL 타입을 사용함

## JDBC의 동작 흐름
---
![JDBC 과정](/assets/img/posts/2024-01-05-22-33-11.png)


### java.sql Package
1. java.sql.Driver
  - DB와 연결하는 Driver class를 만들 때 반드시 implements 해야하는 Interface. 즉, JDBC 드라이버의 중심이 되는 Interface.
2. java.sql.Connection
  - 데이터베이스와 연결정보를 가지는 Interface.
  - DriverManager로부터 Connection 객체를 가져온다.
3. java.sql.Statement
  - SQL문을 DB에 전송하는 방법을 정의한 Interface. Connection을 통해 가져온다.
4. java.sql.ResultSet
  - SELECT 실행 결과를 조회할 수 있는 방법을 정의한 Interface.
5. java.sql.PreparedStatement
  - Statement의 하위 Interface. SQL문을 미리 컴파일하여 실행 속도를 높인다.
6. java.sql.CallableStatement
  - PreparedStatement의 하위 Interface. DBMS의 Stored procedure를 호출한다.


### JDBC 개발 단계
1. JDBC Driver loading
2. Connection
3. Statement / PreparedStatement
4. executeUpdate() or executeQuery()
5. ResultSet (SELECT의 경우)
6. close (ResultSet, Statement, Connection 순으로)


## JDBC를 사용하기 위한 환경 설정(조건)

1. DBMS 서버 설치
  - MySQL, Oracle, DB2 등
2. JDBC Driver 설치
  - 각 DBMS 페이지에서 제공하는 파일을 다운받기 (*.jar 파일)
3. JDBC API
  - JDK에 포함

## : Reference
[위키백과 - JDBC](https://ko.wikipedia.org/wiki/JDBC)  
