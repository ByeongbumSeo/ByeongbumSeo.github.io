---
title: Gradle과 Maven(작성중)
date: 2024-02-27 20:00:22 +09:00
categories:
  - 언어
  - Java
tags:
  - Java
  - Gradle
  - Maven
  - 빌드관리도구
  - Groovy
---


## 공부하게 된 배경
---

Gradle과 Maven은 둘 다 프로젝트 빌드, 의존성 관리 등을 자동화하는 빌드 도구다.

서버 개발에서는 여러 모듈과 라이브러리를 사용해 어플리케이션을 개발한다. 따라서 보통 Gradle 또는 Maven을 선택해서 사용하는 것이 대다수다.

나는 사이드 프로젝트에서는 Gradle을 사용해왔지만 회사에서는 Maven을 사용하고 있다.

대표적인 빌드 도구인 Gradle과 Maven에 대해서 자세히 정리하려 한다.

## 다루는 내용
---

- 빌드
- 빌드 관리 도구
- Gradle
- Maven
- Groovy




## 빌드 관리 도구란?
---

일반적으로 다양한 외부 라이브러리들을 사용하여 애플리케이션을 개발해야하는 상황이 많다. 이 때 각 라이브러리들을 번거롭게 모두 다운받을 필요없이, 빌드도구 설정파일(ex. `pom.xml`, `build.gradle`)에 필요한 라이브러리 종류와 버전들, 종속성 정보를 명시하여 필요한 라이브러리들을 자동으로 다운로드하고 관리할 수 있다.

빌드 관리 도구가 수행하는 작업은 다음과 같다.

- 종속성 다운로드
- 전처리(Preprocessing)
- 소스코드를 바이너리 코드로 컴파일(Compile)
- 바이너리 코드를 패키징(Packaging)
- 테스트 실행(Testing)
- 프로덕션 시스템에 배포(distribution)


빌드 툴로는 Ant, Maven, Gradle 등이 있다.


## 빌드란 ?

빌드란 소스 코드 파일을 서버나 런타임 환경과 같은 대상 환경에서 실행하거나 배포할 수 있도록 형식을 변환하는 프로세스를 말한다.

Java 프로젝트의 경우 빌드를 통해 Java 소스 코드 파일(.java)을 바이트 코드(.class)로 컴파일하고 프로젝트에서 쓰인 각각의 파일 및 자원(.xml, .jpa, .jpg, properties)을 구조화하여 애플리케이션이 올바르게 실행되거나 배포될 수 있도록 한다.

빌드 프로세스 중 몇 가지 주요 단계를 설명하면 다음과 같다. (이 부분은 글의 주요 관심사에서 살짝 벗어나는 내용이므로 넘어가도 좋다.)

- 소스 코드 컴파일: Java 컴파일러(javac)는 사람이 읽을 수 있는 Java 소스 코드(.java 파일)를 플랫폼 독립적인 바이트 코드(.class 파일)로 변환한다. 이는 JVM(자바 가상 머신)이 읽을 수 있다.

- 리소스 패키징: 구성 파일, 정적 자산(예: 이미지 또는 HTML 파일) 및 기타 필요한 파일을 포함한 모든 프로젝트 리소스를 수집하고 구성한다. 이러한 리소스는 배포 가능한 아티팩트를 생성하기 위해 컴파일된 바이트코드와 함께 번들로 묶이는 경우가 많다.

- 종속성 해결: 라이브러리나 프레임워크 등 프로젝트에 필요한 종속성이 해결되어 빌드에 포함된다. **Maven 또는 Gradle과 같은 종속성 관리 도구는 레포지토리에서 종속성을 가져와서 이를 자동으로 처리한다.**

- 매니페스트 파일 생성: 실행 가능한 JAR 파일의 경우 매니페스트 파일(일반적으로 'MANIFEST.MF')이 생성되거나 업데이트된다. 매니페스트 파일에는 버전 정보, 기본 클래스, 클래스 경로 항목 등 JAR 파일에 대한 메타데이터가 포함되어 있다.

- 테스트 실행: 단위 테스트, 통합 테스트 및 기타 유형의 테스트를 포함한 자동화된 테스트가 실행되어 애플리케이션의 정확성을 보장한다.

- 패키징 및 배포: 마지막으로 컴파일된 바이트코드는 프로젝트 리소스 및 추가 종속성과 함께 배포에 적합한 배포 가능한 형식으로 패키지된다. 일반적인 형식에는 JAR 파일, WAR 파일(웹 애플리케이션용) 또는 실행 가능한 바이너리 등이 있다.



즉, 프로젝트에서 작성한 java 코드와 프로젝트 내에 필요한 각종 xml, properties, jar 파일들을 JVM이나 WAS가 인식할 수 있도록 패키징 해주는 것이 빌드이고,

Maven, Gradle 및 Ant와 같은 도구는 빌드 프로세스에 대한 자동화 및 표준화를 제공하여 복잡한 프로젝트 및 종속성을 더 쉽게 관리할 수 있도록 해준다.



​
## Maven
---
개발 시 많은 라이브러리들을 사용하게 되면 이를 관리하는 것이 힘들어지는데 Maven은 이러한 문제를 해결해줄 수 있는 도구다.

Maven은 내가 사용할 라이브러리뿐만 아니라 해당 라이브러리가 작동하는데 필요한 다른 라이브러리들까지 관리하여 자동으로 다운로드하여 준다.
​
- Maven은 Java용 프로젝트 관리도구로 Apache의 Ant 대안으로 만들어졌다.

- XML스크립트를 기반으로 하며, 빌드 중인 프로젝트, 빌드 순서, 다양한 외부 라이브러리 종속성 관계를 `pom.xml` 파일에 명시한다.

- Maven은 외부저장소에서 필요한 라이브러리와 플러그인들을 다운로드 한다음, 로컬시스템의 캐시에 모두 저장한다.

- 예를 들어, "Spring Boot Data JPA Starter" 모듈을 사용하여 프로젝트를 개발하고 싶다면 [메이븐 레포지토리](https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa/2.2.4.RELEASE)에서 해당 모듈을 검색하여 xml 설정파일에 추가하여 사용할 수 있다.

```xml
<!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
    <version>2.2.4.RELEASE</version>
</dependency>
```

### POM - Project Object Model

pom은 이름 그대로 Project Object Model의 정보를 담고있는 파일이다. 이 파일에서 주요하게 다루는 기능들은 다음과 같다.

- 프로젝트 정보 : 프로젝트의 이름, 개발자 목록, 라이센스 등
- 빌드 설정 : 소스, 리소스, 라이프 사이클별 실행한 플러그인(goal)등 빌드와 관련된 설정
- 빌드 환경 : 사용자 환경 별로 달라질 수 있는 프로파일 정보
- POM연관 정보 : 의존 프로젝트(모듈), 상위 프로젝트, 포함하고 있는 하위 모듈 등

Maven의 기능을 이용하기 위해 POM(`pom.xml`)이 사용된다.


### Maven의 Life Cycle

메이븐(Maven)에서는 미리 정의하고 있는 빌드 순서가 있는데 이 순서를 라이프사이클(Life Cycle)이라고 하며, 정해진 Lifecycle에 의하여 작업을 수행한다.

> clean - validate - compile - test - package - verify - install - site - deploy의 라이프 사이클을 가진다.

라이프 사이클에서 각각의 빌드 단계를 Phase라고 하는데 Phase들은 의존 관계를 가지고 있어 해당 Phase가 수행되려면 이전 단계의 Phase가 모두 수행되어야 한다.

- Clean : 이전 빌드에서 생성된 파일들을 삭제하는 단계
- Validate : 프로젝트가 올바른지 확인하고 필요한 모든 정보를 사용할 수 있는지 확인하는 단계
- Compile : 프로젝트의 소스 코드를 컴파일하는 단계
- Test : 유닛(단위) 테스트를 수행하는 단계 - (테스트 실패 시 빌드 실패로 처리한다. 스킵 가능)
- Package : 실제 컴파일된 소스 코드와 리소스들을 jar 등의 배포를 위한 패키지로 만드는 단계
- Verify : 통합 테스트 결과에 대한 검사를 실행하여 품질 기준을 충족하는지 확인하는 단계
- Install : 패키지를 로컬 저장소에 설치하는 단계
- Site : 프로젝트 문서를 생성하는 단계
- Deploy : 만들어진 패키지(Package)를 원격 저장소에 release 하는 단계

위의 라이프 사이클(Life Cycle) 외에도 더 많은 라이프 사이클이 존재한다.
이를 크게 Clean, Build, Site 3가지 라이프 사이클로 나누고 있고, 각 단계를 모두 수행하는 것이 아니라 원하는 단계까지만 수행할 수 있다.


### 장점

- 컴파일과 빌드를 동시에 수행할 수 있다.
- 서버의 Deploy 자원을 관리할 수 있는 환경을 제공한다.
- pom.xml 파일을 통해 관리하므로 개발, 유지보수 측면에서 오픈소스 라이브러리, 프로젝트 등 관리가 용이하다.
- IDE에 종속된 부분들을 제거할 수 있다.
- Maven Profile 기능을 통해 배포 설정 파일을 관리하고 배포 파일을 생성할 수 있다.

### 단점

- Maven에서 기본적으로 지원하지 않는 빌드 과정을 추가해야 하는 경우 상당한 고생이 따른다.
- 특정 플러그인이 설정이 약간만 달라도 해당 설정을 분리해서 중복 기술할 때가 발생한다. 불필요하게 설정이 길어지고 중복, 가독성 저하가 발생하여 유지보수성을 떨어뜨린다.
- 이와 같은 단점을 해결하기 위해, Gradle(그레이들)이라는 새로운 빌드 툴이 등장하였다. Gradle은 안드로이드 애플리케이션의 기본 빌드 툴로 채택되었다.


### Apache Ant vs Maven
Apache Ant는 비교적 자유도가 높은 편이고, Maven은 정해진 라이프사이클에 의하여 작업을 수행하며, 전반적인 프로젝트 관리 기능까지 포함하는 차이점이 있다. (Maven은 Build Tool + Project Management)


## Gradle
---

그래 들(Gradle)은 Maven 이후에 나온 최신 Java 빌드 도구로 '그루비(Groovy)' 문법을 사용해서 작성한다.
`Build.gradle`에 스크립트를 작성하며, 대규모 프로젝트에서 복잡해지는 경향이 있는 XML 기반 스크립트에 비해 관리가 편하다는 장점이 있다. 현재 안드로이드(Android) 프로젝트의 표준 빌드 도구로 채택되어 있기도 하다.

- Apacahe Maven과 Apache Ant에서 볼수 있는 개념들을 사용하는 대안으로써 나온 프로젝트 빌드 관리 툴이다. (완전한 오픈소스)

- Java, Groovy, Kotlin 등의 언어들을 지원한다.

- Groovy 언어를 사용한 Domain-specific-language를 사용한다. (설정파일을 xml파일을 사용하는 Maven보다 코드가 훨씬 간결하다.)

- 2007년에 처음 개발되었고, 2013년에 구글에 의해 안드로이드 프로젝트의 빌드 시스템으로 채택되었다.

- 꽤 큰규모로 예상되는 multi-project 빌드를 도울 수 있도록 디자인되었다.

- Gradle은 프로젝트의 어느부분이 업데이트되었는지 알기 때문에, 빌드에 점진적으로 추가할 수 있다.

-> 업데이트가 이미 반영된 빌드의 부분은 즉 더이상 재실행되지 않는다. (따라서 빌드 시간이 훨씬 단축될 수 있다!)



가독성이 좋다 : 코딩에 의한 간결한 정의가 가능하므로 가독성이 좋다.
재사용에 용이 : 설정 주입 방식(Configuration Injection)을 사용하므로 재사용에 용이하다.
구조적인 장점 : Build Script를 Groovy 기반의 DSL(Domail Specific Language)를 사용하여 코드로서 설정 정보를 구성하므로 구조적인 장점이 있다.
편리함 : Gradle 설치 없이 Gradle wrapper를 이용하여 빌드를 지원한다.
멀티 프로젝트 : Gradle은 멀티 프로젝트 빌드를 지원하기 위해 설계된 빌드 관리 도구이다.
지원: Maven을 완전 지원한다.

---
Maven을 대체할 수 있는 프로젝트 구성 관리 및 범용 빌드 툴이며, Ant Builder와 Groovy script를 기반으로 구축되어 기존 Ant의 역할과 배포 스크립의 기능을 모두 사용가능하며 스프링부트와 안드로이드에서 사용된다.

빌드 속도가 Maven에 비해 10~100배 가량 빠르며, Java, C/C++, Python 등을 지원한다.


#### Groovy?
Groovy는 JVM에서 실행되는 스크립트 언어이다. JVM에서 동작하지만 소스코드를 컴파일할 필요 없다. Java와 호환되며, Java class file들을 Groovy class로 사용 가능하다.
Java 문법과 유사하여 빌드 처리를 관리할 수 있다.
​
### Gradle의 장점
 
#### (1) 간결한 스크립트
Gradle 이전의 빌드 도구인 Ant와 Maven은 XML 문법으로 스크립트를 작성하였다.
XML은 여는 태그와 닫는 태그를 넣어야 하기에 복잡한 빌드 스크립트를 작성하기가 어려우며 가독성이 떨어진다.
반면, Gradle은 Groovy 문법으로 간결한 스크립트를 작성할 수 있다.
 
#### (2) 빌드 속도
프로젝트 규모가 커지게 되면 빌드 속도 차이가 개발 생산성에 큰 영향을 미치게 된다.
Gradle은 캐싱(caching)을 하기 때문에 이전 빌드 도구보다 빌드 속도가 빠르다.
 
※ 하단 링크 페이지에 빌드 캐시(Build cache)를 이용할 경우 Gradle이 Maven의 빌드 속도가 최대 100배까지 벌어질 수 있다고 적혀 있다.
[Gradle 공식페이지 - Gradle vs Maven Comparison](https://gradle.org/maven-vs-gradle/)


#### (3) 멀티 프로젝트 빌드
대규모 Java 프로젝트는 대부분 다중 모듈로 구성된다.

즉, 하나의 프로젝트 안에 여러 모듈이 동시에 개발되며, 각 모듈이 공통으로 사용하는 모듈도 만들어지게 되는데 이렇게 동시에 여러 모듈을 개발하게 되는 경우 각각 따로 빌드 작업을 하면 번거로울 뿐만 아니라 실수가 생기기도 쉽다.

Gradle의 멀티 프로젝트 빌드 기능을 이용하면 이런 번거로움과 실수를 획기적으로 줄일 수 있다.

## Gradle vs Maven
---


1. 스크립트 길이와 가독성 면에서 gradle이 우세하다.

2. 빌드와 테스트 실행 결과 gradle이 더 빠르다. (gradle은 캐시를 사용하기 때문에 테스트 반복 시 차이가 더 커진다.)
![Gradle vs Maven 속도 비교](/assets/img/posts/2024-03-16-21-59-28.png)


3. 의존성이 늘어날 수록 성능과 스크립트 품질의 차이가 심해질 것이다.

maven은 프로젝트가 커질수록 빌드 스크립트의 내용이 길어지고 가독성이 떨어집니다.

반면에 gradle은 훨씬 적은 양의 스크립트로 짧고 간결하게 작성할 수 있습니다.

 
maven이 정적인 형태의 XML 기반으로 작성되어 동적인 빌드를 적용할 경우 어려움이 많다면,

gradle은 Groovy를 사용하기 때문에 동적인 빌드는 Groovy 스크립트로 플러그인을 호출하거나 직접 코드를 짜면 됩니다.



의존성이 늘어날 수록 스크립트 품질의 차이가 커진다.
Maven은 멀티 프로젝트에서 특정 설정을 다른 모듈에서 사용하려면 상속 받아야하지만, gradle은 설정 주입 방식을 사용하므로 멀티 프로젝트에 적합하다.




산업 표준: Maven은 오랜 기간 동안 Java 프로젝트의 빌드 및 의존성 관리를 위한 산업 표준 도구로 자리 잡았습니다. 따라서 Maven을 이해하고 사용하는 것은 많은 기업 및 프로젝트에서 요구되는 기본 지식입니다.

커뮤니티 및 생태계: Maven은 매우 큰 사용자 커뮤니티와 풍부한 생태계를 갖고 있습니다. 따라서 Maven을 사용하는 경우 관련된 문서, 플러그인, 템플릿 등을 쉽게 찾을 수 있습니다.

프로젝트 요구사항: 프로젝트나 기업의 요구사항에 따라 Gradle 또는 Maven을 사용하는 경우가 다를 수 있습니다. 특정 프로젝트에서는 이미 Maven을 사용 중이거나, 기존에 Maven 기반의 프로젝트가 많은 경우 Maven을 사용하는 것이 더 적절할 수 있습니다.

기술 스택 및 선호도: 개발자 개인이나 팀의 기술 스택 및 선호도에 따라 Gradle이나 Maven 중 하나를 선호하는 경우도 있습니다. Gradle은 Groovy 기반의 DSL을 사용하여 빌드 스크립트를 작성하므로, Groovy나 DSL에 익숙한 개발자에게는 Gradle이 보다 편리할 수 있습니다.


프로젝트의 특성과 요구사항에 따라 적절한 도구를 선택하고 활용할 수 있어야 합니다.


프로젝트 관리 및 의존성 관리: 서버 개발에서는 여러 모듈과 라이브러리를 사용해 복잡한 애플리케이션을 개발합니다. Gradle과 Maven은 이러한 의존성을 관리하고, 프로젝트를 효율적으로 구성하는 데 도움을 줍니다. 이를 통해 개발자는 라이브러리의 버전 관리나 외부 의존성에 대한 걱정 없이 개발에 집중할 수 있습니다.

빌드 자동화: 서버 애플리케이션은 주기적으로 또는 특정 이벤트에 따라 빌드되어야 합니다. Gradle과 Maven은 이러한 빌드 프로세스를 자동화하여 효율적으로 관리할 수 있도록 도와줍니다. 이를 통해 개발자는 빌드 및 배포 과정을 간편하게 수행할 수 있습니다.

다양한 플러그인 및 기능: Gradle과 Maven은 다양한 플러그인과 기능을 제공하여 개발자가 프로젝트에 필요한 기능을 추가할 수 있습니다. 예를 들어, 테스트 실행, 정적 코드 분석, 문서 생성 등 다양한 작업을 자동화할 수 있습니다.

산출물 관리: 서버 애플리케이션의 빌드 과정에서 생성되는 산출물(바이너리, 문서 등)을 관리하는 것도 중요합니다. Gradle과 Maven은 이러한 산출물을 효율적으로 관리하고 배포할 수 있는 기능을 제공합니다.

산업 표준 및 커뮤니티 지원: Gradle과 Maven은 모두 널리 사용되는 산업 표준 빌드 도구이며, 각각의 커뮤니티와 생태계가 형성되어 있습니다. 서버 개발자로서는 이러한 도구에 대한 이해와 숙련이 필요하며, 온라인 커뮤니티에서의 지원을 받을 수 있습니다.


## : Reference
---
- [지수의 개발 기록장 - Maven,Gradle](https://jisooo.tistory.com/entry/Spring-%EB%B9%8C%EB%93%9C-%EA%B4%80%EB%A6%AC-%EB%8F%84%EA%B5%AC-Maven%EA%B3%BC-Gradle-%EB%B9%84%EA%B5%90%ED%95%98%EA%B8%B0)
- [무작정 개발 - Maven,Gradle](https://backendcode.tistory.com/199)
- [smlee - Maven과 Gradle의 개념 및 비교](https://velog.io/@leesomyoung/Maven%EA%B3%BC-Gradle%EC%9D%98-%EC%B0%A8%EC%9D%B4-%EB%B0%8F-%EB%B9%84%EA%B5%90)
- [HyoJun Blog - Maven과 Gradle의 차이](https://hyojun123.github.io/2019/04/18/gradleAndMaven/)
- [coco3o - 메이븐(Maven)과 그래들(Gradle)의 개념 및 비교](https://dev-coco.tistory.com/65)